"use strict";(self.webpackChunktradeanalyzer=self.webpackChunktradeanalyzer||[]).push([[3546],{5397:(t,e,n)=>{n.r(e),n.d(e,{default:()=>R});var r=n(7294),o=n(3935),i=n(5697),c=n.n(i),a=n(7458),u=n(5298),s=["invertAxis","invertSecondaryAxis"];function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}var g="undefined"!=typeof window,j=g&&"CSS"in window&&"supports"in window.CSS&&CSS.supports("display","contents"),S=g&&"MutationObserver"in window;function C(t){return t[0].toUpperCase()+t.slice(1)}function P(t){if(t){for(var e=t.parentElement;e;){if(window.getComputedStyle(e).overflow.split(" ").every((function(t){return"auto"===t||"scroll"===t})))return e;e=e.parentElement}return document.documentElement}}function A(t){var e=t.axis,n=t.container,r=t.element,o=t.invertAxis,i=t.secondary,c=t.scrollContainer,s=t.spacing,l=window.getComputedStyle(r),f=n.parentElement,p=(0,a.Z)(f,c),y=(0,a.Z)(f,document.documentElement),d="x"===e,b=d?"left":"top",v=d?"right":"bottom",m=d?"width":"height",h="overflow".concat(C(b)),w="overflow".concat(C(v)),O="scroll".concat(C(b)),g=C(m),j="offset".concat(g),S="client".concat(g),P="min-".concat(m),A=c[j]-c[S],E="object"===x(s)?s[b]:s,R=-Math.max(p[h],y[h]+document.documentElement[O])-E,k="object"===x(s)?s[v]:s,M=-Math.max(p[w],y[w]-document.documentElement[O])-k-A;i&&(R+=f[S],M+=f[S]);var _=r[j];function D(){r.style[b]="auto",r.style[v]=i?"0":"100%"}function Z(){r.style[b]=i?"0":"100%",r.style[v]="auto"}function F(t,e){var n=_<=t;return n&&e(),n}function T(){return F(R,D)}function q(){return F(M,Z)}(o?T()||q():q()||T())||function(){var t=R>M,e=l[P]&&parseInt(l[P],10);function n(t){(0,u.Z)(!e||t>=e,"<Fit />'s child will not fit anywhere with its current ".concat(P," of ").concat(e,"px."));var n=Math.max(t,e||0);(0,u.Z)(!1,"<Fit />'s child needed to have its ".concat(m," decreased to ").concat(n,"px.")),r.style[m]="".concat(n,"px")}t?(n(R),D()):(n(M),Z())}()}function E(t){var e=t.invertAxis,n=t.invertSecondaryAxis,r=m(t,s);!function(t){A(t)}(w(w({},r),{},{invertAxis:e})),function(t){A(w(w({},t),{},{axis:"x"===t.axis?"y":"x",secondary:!0}))}(w(w({},r),{},{invertAxis:n}))}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i,c=y(a);function a(){var t;l(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return O(b(t=c.call.apply(c,[this].concat(n))),"onMutation",(function(){t.fit()})),O(b(t),"mutationObserver",S&&new MutationObserver(t.onMutation)),O(b(t),"fit",(function(){var e=b(t),n=e.scrollContainer,r=e.container,o=e.element;if(o){var i=o.clientWidth,c=o.clientHeight;if(t.elementWidth!==i||t.elementHeight!==c){t.elementWidth=i,t.elementHeight=c;var a=r.parentElement;if(a){"absolute"!==window.getComputedStyle(o).position&&((0,u.Z)(!1,"<Fit />'s child does not have absolute position. You should apply `position: absolute` to it."),o.style.position="absolute");var s=window.getComputedStyle(a).position;"relative"!==s&&"absolute"!==s&&((0,u.Z)(!1,"<Fit />'s parent does not have relative position. You should apply `position: relative` to it."),a.style.position="relative");var l=t.props;E({container:r,element:o,invertAxis:l.invertAxis,invertSecondaryAxis:l.invertSecondaryAxis,axis:l.mainAxis,scrollContainer:n,spacing:l.spacing})}}}})),t}return e=a,(n=[{key:"componentDidMount",value:function(){if(!j){var t=(0,o.findDOMNode)(this);this.container=t,this.element=t,this.scrollContainer=P(t)}this.fit(),S&&this.mutationObserver.observe(this.element,{attributes:!0,attributeFilter:["class","style"]})}},{key:"render",value:function(){var t=this,e=this.props.children,n=r.Children.only(e);return j?r.createElement("span",{ref:function(e){t.container=e;var n=e&&e.firstChild;t.element=n,t.scrollContainer=P(n)},style:{display:"contents"}},n):n}}])&&f(e.prototype,n),i&&f(e,i),a}(r.Component);R.propTypes={children:c().node,invertAxis:c().bool,invertSecondaryAxis:c().bool,mainAxis:c().oneOf(["x","y"]),spacing:c().oneOfType([c().number,c().shape({bottom:c().number.isRequired,left:c().number.isRequired,right:c().number.isRequired,top:c().number.isRequired})])},R.defaultProps={mainAxis:"y",spacing:8}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnBtLnJlYWN0LWZpdC4wMGY3Yjg4MTUwZTFkMzRhMTQ5YS5qcyIsIm1hcHBpbmdzIjoiMk1BQUlBLEVBQVksQ0FBQyxhQUFjLHVCQUUvQixTQUFTQyxFQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxhQUFvQkMsR0FBZ0IsTUFBTSxJQUFJQyxVQUFVLG9DQUF3QyxDQUV4SixTQUFTQyxFQUFrQkMsRUFBUUMsR0FBUyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLElBQUlFLEVBQWFILEVBQU1DLEdBQUlFLEVBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFVBQVdGLElBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sRUFBYSxDQUFFLENBTTVULFNBQVNPLEVBQWdCQyxFQUFHQyxHQUErRyxPQUExR0YsRUFBa0JILE9BQU9NLGdCQUFrQixTQUF5QkYsRUFBR0MsR0FBc0IsT0FBakJELEVBQUVHLFVBQVlGLEVBQVVELENBQUcsRUFBVUQsRUFBZ0JDLEVBQUdDLEVBQUksQ0FFekssU0FBU0csRUFBYUMsR0FBVyxJQUFJQyxFQU1yQyxXQUF1QyxHQUF1QixvQkFBWkMsVUFBNEJBLFFBQVFDLFVBQVcsT0FBTyxFQUFPLEdBQUlELFFBQVFDLFVBQVVDLEtBQU0sT0FBTyxFQUFPLEdBQXFCLG1CQUFWQyxNQUFzQixPQUFPLEVBQU0sSUFBc0YsT0FBaEZDLFFBQVFDLFVBQVVDLFFBQVFDLEtBQUtQLFFBQVFDLFVBQVVHLFFBQVMsSUFBSSxXQUFhLE1BQVksQ0FBa0MsQ0FBMUIsTUFBT0ksR0FBSyxPQUFPLENBQU8sQ0FBRSxDQU52UUMsR0FBNkIsT0FBTyxXQUFrQyxJQUFzQ0MsRUFBbENDLEVBQVFDLEVBQWdCZCxHQUFrQixHQUFJQyxFQUEyQixDQUFFLElBQUljLEVBQVlELEVBQWdCRSxNQUFNQyxZQUFhTCxFQUFTVixRQUFRQyxVQUFVVSxFQUFPSyxVQUFX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QUFhbEYsR0FDaEIrRSxFQUFPL0UsVUFBWUEsRUFDbkIsSUFBSVosRUFBVVksR0FBYUEsRUFBVW1GLFdBQ3JDSixFQUFPM0YsUUFBVUEsRUFDakIyRixFQUFPNUUsZ0JBQWtCaEIsRUFBb0JDLEVBQy9DLEVBQ0FpQixNQUFPLENBQ0wyQixRQUFTLGFBRVZpRCxHQUdFQSxDQUNULE1BalUwRS9LLEVBQWtCRixFQUFZMkIsVUFBVzRILEdBQWlCQyxHQUFhdEosRUFBa0JGLEVBQWF3SixHQW9VM0tQLENBQ1QsQ0E1SXVCLENBNElyQixFQUFBbUMsV0FHRm5DLEVBQUlvQyxVQUFZLENBQ2RMLFNBQVUsU0FDVi9FLFdBQVksU0FDWjRDLG9CQUFxQixTQUNyQjRCLFNBQVUsVUFBZ0IsQ0FBQyxJQUFLLE1BQ2hDckUsUUFBUyxjQUFvQixDQUFDLFdBQWtCLFVBQWdCLENBQzlEa0YsT0FBUSxzQkFDUkMsS0FBTSxzQkFDTkMsTUFBTyxzQkFDUEMsSUFBSywyQkFHVHhDLEVBQUl5QyxhQUFlLENBQ2pCakIsU0FBVSxJQUNWckUsUUFBUyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJhZGVhbmFseXplci8uL25vZGVfbW9kdWxlcy9yZWFjdC1maXQvZGlzdC9lc20vRml0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfZXhjbHVkZWQgPSBbXCJpbnZlcnRBeGlzXCIsIFwiaW52ZXJ0U2Vjb25kYXJ5QXhpc1wiXTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5mdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZmluZERPTU5vZGUgfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBkZXRlY3RFbGVtZW50T3ZlcmZsb3cgZnJvbSAnZGV0ZWN0LWVsZW1lbnQtb3ZlcmZsb3cnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAndGlueS13YXJuaW5nJztcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbnZhciBpc0Rpc3BsYXlDb250ZW50c1N1cHBvcnRlZCA9IGlzQnJvd3NlciAmJiAnQ1NTJyBpbiB3aW5kb3cgJiYgJ3N1cHBvcnRzJyBpbiB3aW5kb3cuQ1NTICYmIENTUy5zdXBwb3J0cygnZGlzcGxheScsICdjb250ZW50cycpO1xudmFyIGlzTXV0YXRpb25PYnNlcnZlclN1cHBvcnRlZCA9IGlzQnJvd3NlciAmJiAnTXV0YXRpb25PYnNlcnZlcicgaW4gd2luZG93O1xuXG5mdW5jdGlvbiBjYXBpdGFsaXplKGEpIHtcbiAgcmV0dXJuIGFbMF0udG9VcHBlckNhc2UoKSArIGEuc2xpY2UoMSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRTY3JvbGxDb250YWluZXIoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcblxuICB3aGlsZSAocGFyZW50KSB7XG4gICAgdmFyIF93aW5kb3ckZ2V0Q29tcHV0ZWRTdCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCksXG4gICAgICAgIG92ZXJmbG93ID0gX3dpbmRvdyRnZXRDb21wdXRlZFN0Lm92ZXJmbG93O1xuXG4gICAgaWYgKG92ZXJmbG93LnNwbGl0KCcgJykuZXZlcnkoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvID09PSAnYXV0bycgfHwgbyA9PT0gJ3Njcm9sbCc7XG4gICAgfSkpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuXG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBhbGlnbkF4aXMoX3JlZikge1xuICB2YXIgYXhpcyA9IF9yZWYuYXhpcyxcbiAgICAgIGNvbnRhaW5lciA9IF9yZWYuY29udGFpbmVyLFxuICAgICAgZWxlbWVudCA9IF9yZWYuZWxlbWVudCxcbiAgICAgIGludmVydEF4aXMgPSBfcmVmLmludmVydEF4aXMsXG4gICAgICBzZWNvbmRhcnkgPSBfcmVmLnNlY29uZGFyeSxcbiAgICAgIHNjcm9sbENvbnRhaW5lciA9IF9yZWYuc2Nyb2xsQ29udGFpbmVyLFxuICAgICAgc3BhY2luZyA9IF9yZWYuc3BhY2luZztcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIHZhciBwYXJlbnQgPSBjb250YWluZXIucGFyZW50RWxlbWVudDtcbiAgdmFyIHNjcm9sbENvbnRhaW5lckNvbGxpc2lvbnMgPSBkZXRlY3RFbGVtZW50T3ZlcmZsb3cocGFyZW50LCBzY3JvbGxDb250YWluZXIpO1xuICB2YXIgZG9jdW1lbnRDb2xsaXNpb25zID0gZGV0ZWN0RWxlbWVudE92ZXJmbG93KHBhcmVudCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgdmFyIGlzWCA9IGF4aXMgPT09ICd4JztcbiAgdmFyIHN0YXJ0UHJvcGVydHkgPSBpc1ggPyAnbGVmdCcgOiAndG9wJztcbiAgdmFyIGVuZFByb3BlcnR5ID0gaXNYID8gJ3JpZ2h0JyA6ICdib3R0b20nO1xuICB2YXIgc2l6ZVByb3BlcnR5ID0gaXNYID8gJ3dpZHRoJyA6ICdoZWlnaHQnO1xuICB2YXIgb3ZlcmZsb3dTdGFydFByb3BlcnR5ID0gXCJvdmVyZmxvd1wiLmNvbmNhdChjYXBpdGFsaXplKHN0YXJ0UHJvcGVydHkpKTtcbiAgdmFyIG92ZXJmbG93RW5kUHJvcGVydHkgPSBcIm92ZXJmbG93XCIuY29uY2F0KGNhcGl0YWxpemUoZW5kUHJvcGVydHkpKTtcbiAgdmFyIHNjcm9sbFByb3BlcnR5ID0gXCJzY3JvbGxcIi5jb25jYXQoY2FwaXRhbGl6ZShzdGFydFByb3BlcnR5KSk7XG4gIHZhciB1cHBlcmNhc2VkU2l6ZVByb3BlcnR5ID0gY2FwaXRhbGl6ZShzaXplUHJvcGVydHkpO1xuICB2YXIgb2Zmc2V0U2l6ZVByb3BlcnR5ID0gXCJvZmZzZXRcIi5jb25jYXQodXBwZXJjYXNlZFNpemVQcm9wZXJ0eSk7XG4gIHZhciBjbGllbnRTaXplUHJvcGVydHkgPSBcImNsaWVudFwiLmNvbmNhdCh1cHBlcmNhc2VkU2l6ZVByb3BlcnR5KTtcbiAgdmFyIG1pblNpemVQcm9wZXJ0eSA9IFwibWluLVwiLmNvbmNhdChzaXplUHJvcGVydHkpO1xuICB2YXIgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxDb250YWluZXJbb2Zmc2V0U2l6ZVByb3BlcnR5XSAtIHNjcm9sbENvbnRhaW5lcltjbGllbnRTaXplUHJvcGVydHldO1xuICB2YXIgc3RhcnRTcGFjaW5nID0gX3R5cGVvZihzcGFjaW5nKSA9PT0gJ29iamVjdCcgPyBzcGFjaW5nW3N0YXJ0UHJvcGVydHldIDogc3BhY2luZztcbiAgdmFyIGF2YWlsYWJsZVN0YXJ0U3BhY2UgPSAtTWF0aC5tYXgoc2Nyb2xsQ29udGFpbmVyQ29sbGlzaW9uc1tvdmVyZmxvd1N0YXJ0UHJvcGVydHldLCBkb2N1bWVudENvbGxpc2lvbnNbb3ZlcmZsb3dTdGFydFByb3BlcnR5XSArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtzY3JvbGxQcm9wZXJ0eV0pIC0gc3RhcnRTcGFjaW5nO1xuICB2YXIgZW5kU3BhY2luZyA9IF90eXBlb2Yoc3BhY2luZykgPT09ICdvYmplY3QnID8gc3BhY2luZ1tlbmRQcm9wZXJ0eV0gOiBzcGFjaW5nO1xuICB2YXIgYXZhaWxhYmxlRW5kU3BhY2UgPSAtTWF0aC5tYXgoc2Nyb2xsQ29udGFpbmVyQ29sbGlzaW9uc1tvdmVyZmxvd0VuZFByb3BlcnR5XSwgZG9jdW1lbnRDb2xsaXNpb25zW292ZXJmbG93RW5kUHJvcGVydHldIC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BlcnR5XSkgLSBlbmRTcGFjaW5nIC0gc2Nyb2xsYmFyV2lkdGg7XG5cbiAgaWYgKHNlY29uZGFyeSkge1xuICAgIGF2YWlsYWJsZVN0YXJ0U3BhY2UgKz0gcGFyZW50W2NsaWVudFNpemVQcm9wZXJ0eV07XG4gICAgYXZhaWxhYmxlRW5kU3BhY2UgKz0gcGFyZW50W2NsaWVudFNpemVQcm9wZXJ0eV07XG4gIH1cblxuICB2YXIgb2Zmc2V0U2l6ZSA9IGVsZW1lbnRbb2Zmc2V0U2l6ZVByb3BlcnR5XTtcblxuICBmdW5jdGlvbiBkaXNwbGF5U3RhcnQoKSB7XG4gICAgZWxlbWVudC5zdHlsZVtzdGFydFByb3BlcnR5XSA9ICdhdXRvJztcbiAgICBlbGVtZW50LnN0eWxlW2VuZFByb3BlcnR5XSA9IHNlY29uZGFyeSA/ICcwJyA6ICcxMDAlJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlFbmQoKSB7XG4gICAgZWxlbWVudC5zdHlsZVtzdGFydFByb3BlcnR5XSA9IHNlY29uZGFyeSA/ICcwJyA6ICcxMDAlJztcbiAgICBlbGVtZW50LnN0eWxlW2VuZFByb3BlcnR5XSA9ICdhdXRvJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlJZkZpdHMoYXZhaWxhYmxlU3BhY2UsIGRpc3BsYXkpIHtcbiAgICB2YXIgZml0cyA9IG9mZnNldFNpemUgPD0gYXZhaWxhYmxlU3BhY2U7XG5cbiAgICBpZiAoZml0cykge1xuICAgICAgZGlzcGxheSgpO1xuICAgIH1cblxuICAgIHJldHVybiBmaXRzO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheVN0YXJ0SWZGaXRzKCkge1xuICAgIHJldHVybiBkaXNwbGF5SWZGaXRzKGF2YWlsYWJsZVN0YXJ0U3BhY2UsIGRpc3BsYXlTdGFydCk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5RW5kSWZGaXRzKCkge1xuICAgIHJldHVybiBkaXNwbGF5SWZGaXRzKGF2YWlsYWJsZUVuZFNwYWNlLCBkaXNwbGF5RW5kKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlXaGVyZXZlclNocmlua2VkRml0cygpIHtcbiAgICB2YXIgbW9yZVNwYWNlU3RhcnQgPSBhdmFpbGFibGVTdGFydFNwYWNlID4gYXZhaWxhYmxlRW5kU3BhY2U7XG4gICAgdmFyIG1pblNpemUgPSBzdHlsZVttaW5TaXplUHJvcGVydHldICYmIHBhcnNlSW50KHN0eWxlW21pblNpemVQcm9wZXJ0eV0sIDEwKTtcblxuICAgIGZ1bmN0aW9uIHNocmlua1RvU2l6ZShzaXplKSB7XG4gICAgICB3YXJuaW5nKCFtaW5TaXplIHx8IHNpemUgPj0gbWluU2l6ZSwgXCI8Rml0IC8+J3MgY2hpbGQgd2lsbCBub3QgZml0IGFueXdoZXJlIHdpdGggaXRzIGN1cnJlbnQgXCIuY29uY2F0KG1pblNpemVQcm9wZXJ0eSwgXCIgb2YgXCIpLmNvbmNhdChtaW5TaXplLCBcInB4LlwiKSk7XG4gICAgICB2YXIgbmV3U2l6ZSA9IE1hdGgubWF4KHNpemUsIG1pblNpemUgfHwgMCk7XG4gICAgICB3YXJuaW5nKGZhbHNlLCBcIjxGaXQgLz4ncyBjaGlsZCBuZWVkZWQgdG8gaGF2ZSBpdHMgXCIuY29uY2F0KHNpemVQcm9wZXJ0eSwgXCIgZGVjcmVhc2VkIHRvIFwiKS5jb25jYXQobmV3U2l6ZSwgXCJweC5cIikpO1xuICAgICAgZWxlbWVudC5zdHlsZVtzaXplUHJvcGVydHldID0gXCJcIi5jb25jYXQobmV3U2l6ZSwgXCJweFwiKTtcbiAgICB9XG5cbiAgICBpZiAobW9yZVNwYWNlU3RhcnQpIHtcbiAgICAgIHNocmlua1RvU2l6ZShhdmFpbGFibGVTdGFydFNwYWNlKTtcbiAgICAgIGRpc3BsYXlTdGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaHJpbmtUb1NpemUoYXZhaWxhYmxlRW5kU3BhY2UpO1xuICAgICAgZGlzcGxheUVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBmaXRzO1xuXG4gIGlmIChpbnZlcnRBeGlzKSB7XG4gICAgZml0cyA9IGRpc3BsYXlTdGFydElmRml0cygpIHx8IGRpc3BsYXlFbmRJZkZpdHMoKTtcbiAgfSBlbHNlIHtcbiAgICBmaXRzID0gZGlzcGxheUVuZElmRml0cygpIHx8IGRpc3BsYXlTdGFydElmRml0cygpO1xuICB9XG5cbiAgaWYgKCFmaXRzKSB7XG4gICAgZGlzcGxheVdoZXJldmVyU2hyaW5rZWRGaXRzKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWxpZ25NYWluQXhpcyhhcmdzKSB7XG4gIGFsaWduQXhpcyhhcmdzKTtcbn1cblxuZnVuY3Rpb24gYWxpZ25TZWNvbmRhcnlBeGlzKGFyZ3MpIHtcbiAgYWxpZ25BeGlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXJncyksIHt9LCB7XG4gICAgYXhpczogYXJncy5heGlzID09PSAneCcgPyAneScgOiAneCcsXG4gICAgc2Vjb25kYXJ5OiB0cnVlXG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gYWxpZ25Cb3RoQXhpcyhhcmdzKSB7XG4gIHZhciBpbnZlcnRBeGlzID0gYXJncy5pbnZlcnRBeGlzLFxuICAgICAgaW52ZXJ0U2Vjb25kYXJ5QXhpcyA9IGFyZ3MuaW52ZXJ0U2Vjb25kYXJ5QXhpcyxcbiAgICAgIGNvbW1vbkFyZ3MgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoYXJncywgX2V4Y2x1ZGVkKTtcblxuICBhbGlnbk1haW5BeGlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29tbW9uQXJncyksIHt9LCB7XG4gICAgaW52ZXJ0QXhpczogaW52ZXJ0QXhpc1xuICB9KSk7XG4gIGFsaWduU2Vjb25kYXJ5QXhpcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbW1vbkFyZ3MpLCB7fSwge1xuICAgIGludmVydEF4aXM6IGludmVydFNlY29uZGFyeUF4aXNcbiAgfSkpO1xufVxuXG52YXIgRml0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhGaXQsIF9Db21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRml0KTtcblxuICBmdW5jdGlvbiBGaXQoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpdCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm9uTXV0YXRpb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuZml0KCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwibXV0YXRpb25PYnNlcnZlclwiLCBpc011dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQgJiYgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoX3RoaXMub25NdXRhdGlvbikpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImZpdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgICAgc2Nyb2xsQ29udGFpbmVyID0gX2Fzc2VydFRoaXNJbml0aWFsaXplLnNjcm9sbENvbnRhaW5lcixcbiAgICAgICAgICBjb250YWluZXIgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemUuY29udGFpbmVyLFxuICAgICAgICAgIGVsZW1lbnQgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemUuZWxlbWVudDtcblxuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGVsZW1lbnRXaWR0aCA9IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICB2YXIgZWxlbWVudEhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0OyAvLyBObyBuZWVkIHRvIHJlY2FsY3VsYXRlIC0gYWxyZWFkeSBkaWQgdGhhdCBmb3IgY3VycmVudCBkaW1lbnNpb25zXG5cbiAgICAgIGlmIChfdGhpcy5lbGVtZW50V2lkdGggPT09IGVsZW1lbnRXaWR0aCAmJiBfdGhpcy5lbGVtZW50SGVpZ2h0ID09PSBlbGVtZW50SGVpZ2h0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gU2F2ZSB0aGUgZGltZW5zaW9ucyBzbyB0aGF0IHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBlYXQgdGhlIGZ1bmN0aW9uIGlmIHVuY2hhbmdlZFxuXG5cbiAgICAgIF90aGlzLmVsZW1lbnRXaWR0aCA9IGVsZW1lbnRXaWR0aDtcbiAgICAgIF90aGlzLmVsZW1lbnRIZWlnaHQgPSBlbGVtZW50SGVpZ2h0O1xuICAgICAgdmFyIHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnRFbGVtZW50OyAvLyBDb250YWluZXIgd2FzIHVubW91bnRlZFxuXG4gICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgPEZpdCAvPidzIGNoaWxkIGhhcyBhIGFic29sdXRlIHBvc2l0aW9uLiBPdGhlcndpc2UsXG4gICAgICAgKiB3ZSB3b3VsZG4ndCBiZSBhYmxlIHRvIHBsYWNlIHRoZSBjaGlsZCBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbi5cbiAgICAgICAqL1xuXG5cbiAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgdmFyIHBvc2l0aW9uID0gc3R5bGUucG9zaXRpb247XG5cbiAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ2Fic29sdXRlJykge1xuICAgICAgICB3YXJuaW5nKGZhbHNlLCAnPEZpdCAvPlxcJ3MgY2hpbGQgZG9lcyBub3QgaGF2ZSBhYnNvbHV0ZSBwb3NpdGlvbi4gWW91IHNob3VsZCBhcHBseSBgcG9zaXRpb246IGFic29sdXRlYCB0byBpdC4nKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgPEZpdCAvPidzIHBhcmVudCBoYXMgYSByZWxhdGl2ZSBwb3NpdGlvbi4gT3RoZXJ3aXNlLFxuICAgICAgICogd2Ugd291bGRuJ3QgYmUgYWJsZSB0byBwbGFjZSB0aGUgY2hpbGQgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24uXG4gICAgICAgKi9cblxuXG4gICAgICB2YXIgcGFyZW50U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpO1xuICAgICAgdmFyIHBhcmVudFBvc2l0aW9uID0gcGFyZW50U3R5bGUucG9zaXRpb247XG5cbiAgICAgIGlmIChwYXJlbnRQb3NpdGlvbiAhPT0gJ3JlbGF0aXZlJyAmJiBwYXJlbnRQb3NpdGlvbiAhPT0gJ2Fic29sdXRlJykge1xuICAgICAgICB3YXJuaW5nKGZhbHNlLCAnPEZpdCAvPlxcJ3MgcGFyZW50IGRvZXMgbm90IGhhdmUgcmVsYXRpdmUgcG9zaXRpb24uIFlvdSBzaG91bGQgYXBwbHkgYHBvc2l0aW9uOiByZWxhdGl2ZWAgdG8gaXQuJyk7XG4gICAgICAgIHBhcmVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICB9XG5cbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGludmVydEF4aXMgPSBfdGhpcyRwcm9wcy5pbnZlcnRBeGlzLFxuICAgICAgICAgIGludmVydFNlY29uZGFyeUF4aXMgPSBfdGhpcyRwcm9wcy5pbnZlcnRTZWNvbmRhcnlBeGlzLFxuICAgICAgICAgIG1haW5BeGlzID0gX3RoaXMkcHJvcHMubWFpbkF4aXMsXG4gICAgICAgICAgc3BhY2luZyA9IF90aGlzJHByb3BzLnNwYWNpbmc7XG4gICAgICBhbGlnbkJvdGhBeGlzKHtcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGludmVydEF4aXM6IGludmVydEF4aXMsXG4gICAgICAgIGludmVydFNlY29uZGFyeUF4aXM6IGludmVydFNlY29uZGFyeUF4aXMsXG4gICAgICAgIGF4aXM6IG1haW5BeGlzLFxuICAgICAgICBzY3JvbGxDb250YWluZXI6IHNjcm9sbENvbnRhaW5lcixcbiAgICAgICAgc3BhY2luZzogc3BhY2luZ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRml0LCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICghaXNEaXNwbGF5Q29udGVudHNTdXBwb3J0ZWQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWZpbmQtZG9tLW5vZGVcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBmaW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lciA9IGZpbmRTY3JvbGxDb250YWluZXIoZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZml0KCk7XG5cbiAgICAgIGlmIChpc011dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsnY2xhc3MnLCAnc3R5bGUnXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgICAgdmFyIGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbik7XG5cbiAgICAgIGlmIChpc0Rpc3BsYXlDb250ZW50c1N1cHBvcnRlZCkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihjb250YWluZXIpIHtcbiAgICAgICAgICAgIF90aGlzMi5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGNvbnRhaW5lciAmJiBjb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIF90aGlzMi5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIF90aGlzMi5zY3JvbGxDb250YWluZXIgPSBmaW5kU2Nyb2xsQ29udGFpbmVyKGVsZW1lbnQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdjb250ZW50cydcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGaXQ7XG59KENvbXBvbmVudCk7XG5cbmV4cG9ydCB7IEZpdCBhcyBkZWZhdWx0IH07XG5GaXQucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG4gIGludmVydEF4aXM6IFByb3BUeXBlcy5ib29sLFxuICBpbnZlcnRTZWNvbmRhcnlBeGlzOiBQcm9wVHlwZXMuYm9vbCxcbiAgbWFpbkF4aXM6IFByb3BUeXBlcy5vbmVPZihbJ3gnLCAneSddKSxcbiAgc3BhY2luZzogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm51bWJlciwgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBib3R0b206IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBsZWZ0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgcmlnaHQ6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICB0b3A6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZFxuICB9KV0pXG59O1xuRml0LmRlZmF1bHRQcm9wcyA9IHtcbiAgbWFpbkF4aXM6ICd5JyxcbiAgc3BhY2luZzogOFxufTsiXSwibmFtZXMiOlsiX2V4Y2x1ZGVkIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiX3NldFByb3RvdHlwZU9mIiwibyIsInAiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsInNoYW0iLCJQcm94eSIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiY2FsbCIsImUiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwicmVzdWx0IiwiU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YiLCJOZXdUYXJnZXQiLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJhcHBseSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIl90eXBlb2YiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiUmVmZXJlbmNlRXJyb3IiLCJnZXRQcm90b3R5cGVPZiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllcyIsInNvdXJjZSIsImV4Y2x1ZGVkIiwic291cmNlS2V5cyIsImtleXMiLCJpbmRleE9mIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzb3VyY2VTeW1ib2xLZXlzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJvd25LZXlzIiwib2JqZWN0IiwiZW51bWVyYWJsZU9ubHkiLCJzeW1ib2xzIiwiZmlsdGVyIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwicHVzaCIsIl9vYmplY3RTcHJlYWQiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJvYmoiLCJ2YWx1ZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiaXNCcm93c2VyIiwid2luZG93IiwiaXNEaXNwbGF5Q29udGVudHNTdXBwb3J0ZWQiLCJDU1MiLCJzdXBwb3J0cyIsImlzTXV0YXRpb25PYnNlcnZlclN1cHBvcnRlZCIsImNhcGl0YWxpemUiLCJhIiwidG9VcHBlckNhc2UiLCJzbGljZSIsImZpbmRTY3JvbGxDb250YWluZXIiLCJlbGVtZW50IiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsImdldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvdyIsInNwbGl0IiwiZXZlcnkiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImFsaWduQXhpcyIsIl9yZWYiLCJheGlzIiwiY29udGFpbmVyIiwiaW52ZXJ0QXhpcyIsInNlY29uZGFyeSIsInNjcm9sbENvbnRhaW5lciIsInNwYWNpbmciLCJzdHlsZSIsInNjcm9sbENvbnRhaW5lckNvbGxpc2lvbnMiLCJkb2N1bWVudENvbGxpc2lvbnMiLCJpc1giLCJzdGFydFByb3BlcnR5IiwiZW5kUHJvcGVydHkiLCJzaXplUHJvcGVydHkiLCJvdmVyZmxvd1N0YXJ0UHJvcGVydHkiLCJjb25jYXQiLCJvdmVyZmxvd0VuZFByb3BlcnR5Iiwic2Nyb2xsUHJvcGVydHkiLCJ1cHBlcmNhc2VkU2l6ZVByb3BlcnR5Iiwib2Zmc2V0U2l6ZVByb3BlcnR5IiwiY2xpZW50U2l6ZVByb3BlcnR5IiwibWluU2l6ZVByb3BlcnR5Iiwic2Nyb2xsYmFyV2lkdGgiLCJzdGFydFNwYWNpbmciLCJhdmFpbGFibGVTdGFydFNwYWNlIiwiTWF0aCIsIm1heCIsImVuZFNwYWNpbmciLCJhdmFpbGFibGVFbmRTcGFjZSIsIm9mZnNldFNpemUiLCJkaXNwbGF5U3RhcnQiLCJkaXNwbGF5RW5kIiwiZGlzcGxheUlmRml0cyIsImF2YWlsYWJsZVNwYWNlIiwiZGlzcGxheSIsImZpdHMiLCJkaXNwbGF5U3RhcnRJZkZpdHMiLCJkaXNwbGF5RW5kSWZGaXRzIiwibW9yZVNwYWNlU3RhcnQiLCJtaW5TaXplIiwicGFyc2VJbnQiLCJzaHJpbmtUb1NpemUiLCJzaXplIiwibmV3U2l6ZSIsImRpc3BsYXlXaGVyZXZlclNocmlua2VkRml0cyIsImFsaWduQm90aEF4aXMiLCJhcmdzIiwiaW52ZXJ0U2Vjb25kYXJ5QXhpcyIsImNvbW1vbkFyZ3MiLCJhbGlnbk1haW5BeGlzIiwiYWxpZ25TZWNvbmRhcnlBeGlzIiwiRml0IiwiX0NvbXBvbmVudCIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsIl9pbmhlcml0cyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9zdXBlciIsIl90aGlzIiwiX2xlbiIsIkFycmF5IiwiX2tleSIsImZpdCIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJvbk11dGF0aW9uIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplIiwiZWxlbWVudFdpZHRoIiwiY2xpZW50V2lkdGgiLCJlbGVtZW50SGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwicG9zaXRpb24iLCJwYXJlbnRQb3NpdGlvbiIsIl90aGlzJHByb3BzIiwibWFpbkF4aXMiLCJmaW5kRE9NTm9kZSIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZUZpbHRlciIsIl90aGlzMiIsImNoaWxkcmVuIiwiY2hpbGQiLCJyZWYiLCJmaXJzdENoaWxkIiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiZGVmYXVsdFByb3BzIl0sInNvdXJjZVJvb3QiOiIifQ==